<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8" />
  <script type="text/javascript" src="elm.js"></script>
  <link rel="stylesheet" href="site.css" type="text/css" />
  <link rel="stylesheet" href="octicons/octicons.css" type="text/css" />
  <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900|Roboto+Condensed:400,300,700|Roboto+Mono:400,100,300,500,700|Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css' />
</head>

<body>
</body>

<script type="text/javascript">

  console.log(location.search);
  console.log(window.location);

  var name = "code";
  var code = decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null

  console.log(code);

  var app = Elm.fullscreen(Elm.Main, { accessToken:'' });
  if (!code) {
    app.ports.foo.subscribe(function(x) {
      if (x !== null) {
        window.location = x;
      };
    });
  }

</script>

</html>
